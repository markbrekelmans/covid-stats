<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/1.0.11/jquery.csv.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});

      google.charts.setOnLoadCallback(drawChart);

      function drawChart() {
        $.get("/data/data.csv", function(csvString) {
          var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar});

          var data = new google.visualization.DataTable();

          data.addColumn('string', 'Topping');
          data.addColumn('number', 'Slices');
          data.addRows(arrayData);

          var options = {
            title: 'How much pizza I ate last night',
            width: 400,
            height: 400
          };

          var chart = new google.visualization.PieChart(document.getElementById('chart_div'));

          chart.draw(data, options);
        });
      }
    </script>
    <link href="/css/main.css" rel="stylesheet">
    <title>Charts</title>
  </head>

  <body>
    <div id="chart_div">Loading...</div>
  </body>
</html>
